<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, viewport-fit=cover, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
	<meta name="format-detection" content="telephone=no, address=no, email=no">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="default">

	<link rel="stylesheet" href="./assets/css/lib/swiper-bundle.min.css">
	<link rel="stylesheet" href="./assets/css/common.css">

	<script type="text/javascript" src="./assets/js/lib/jquery-3.6.0.min.js"></script>
	<script type="text/javascript" src="./assets/js/lib/swiper-bundle.min.js"></script>
	<script type="text/javascript" src="./assets/js/common.js"></script>
	<title>커뮤니티</title>
	<script>
		$(document).ready(function() {
			let moreBtnCount = 0;
			search();

			$("#moreBtn").on("click", search);

			function search() {
				postData('http://117.52.84.88:8080/api/web/v1/getPrivateLoanCommunityPaging', {MORE_BTN_COUNT: moreBtnCount})
				.then((res) => {
					if (nvl(res.map.list, '') != '') {
						list(res.map.list);
					} else {
						alert("마지막 페이지 입니다.");
					}
				})
				.catch((err) => {
					alert("네트워크 오류가 발생!!.");
				});
				moreBtnCount++;
			}

			function list(slideData) {
				var commList = document.getElementById('comm_list');

				slideData.forEach(function (data) {
					var liElement = document.createElement('li');

					var seqDivElement = document.createElement('div');
					seqDivElement.className = 'comm_num';
					seqDivElement.textContent = data.SEQ;

					var titDivElement = document.createElement('div');
					titDivElement.className = 'comm_tit';

					var aElement = document.createElement('a');
					aElement.href = '#'
					aElement.title = data.TITLE;
					aElement.textContent = data.TITLE;

					var authorDivElement = document.createElement('div');
					authorDivElement.className = 'comm_author';
					authorDivElement.textContent = data.NAME;

					var dateDivElement = document.createElement('div');
					dateDivElement.className = 'comm_date';
					dateDivElement.textContent = changeDataFormat(data.DTS, 'date');

					liElement.appendChild(seqDivElement);
					titDivElement.appendChild(aElement);
					liElement.appendChild(titDivElement);
					liElement.appendChild(authorDivElement);
					liElement.appendChild(dateDivElement);
					commList.appendChild(liElement);
				})
			}
		});
	</script>
</head>
<body>
<!-- #WRAP -->
<div id="wrap">
	<!-- #header -->
	<header id="header"></header>
	<!--// #header -->

	<!-- 모바일 사이트 메뉴 -->
	<div class="m_gnb_wrap" id="m_gnb_wrap"></div>
	<!--// 모바일 사이트 메뉴 -->

	<!-- 검색영역 -->
	<div class="site_srch_wrap" id="site_srch_wrap"></div>
	<!--// 검색영역 -->

	<!-- 2023-11-17 서브메뉴추가 -->
	<div class="sub_menu" id="sub_menu"></div>
	<!--// 2023-11-17 서브메뉴추가 -->

	<!-- #contents -->
	<div id="contents">
		<div class="inner">
			<div class="content">
				<div class="location">
					<ul>
						<li>
							<a href="/index.html" class="home"><img src="assets/images/ico_home.svg" alt=""></a>
						</li>
						<li>
							<a href="/community_list.html"><span>커뮤니티</span></a>
						</li>
					</ul>
				</div>
				<div class="sub_tit_area">
					<h2>커뮤니티</h2>
				</div>

				<!-- 커뮤니티 -->
				<div class="comm_list_wrap">

					<!-- 커뮤니티 리스트 -->
					<ul class="comm_list" id="comm_list">
					</ul>
					<!-- // 커뮤니티 리스트 -->

					<!-- 버튼 -->
					<div class="btn_wrap">
						<button class="btn btn_more" id="moreBtn">
							<span>더보기</span>
						</button>
						<a href="#" class="btn">
							<span>글쓰기</span>
						</a>
					</div>
					<!--// 버튼 -->

				</div>
				<!-- // 커뮤니티 -->
			</div>

			<!-- 사이드 메뉴 -->
			<div class="snb" id="sub"></div>
			<!--// 사이드 메뉴 -->
		</div>
	</div>
	<!--// #contents -->


	<!-- #footer -->
	<footer id="footer"></footer>
	<!--// #footer -->
</div>
<!-- // WRAP -->
</body>
</html>